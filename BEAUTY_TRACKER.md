# Beauty Tracker - Документация

## Обзор

Beauty Tracker - это модуль 30-дневной программы ежедневных привычек ухода за собой, интегрированный в платформу Tunuk. Модуль доступен только авторизованным пользователям в их личных кабинетах.

## Функциональность

### Для гостей (неавторизованных пользователей)
- Просмотр публичной страницы `/beauty-tracker` с описанием программы
- Просмотр демо-примера одного дня
- Призыв к регистрации/входу

### Для авторизованных пользователей (клиенты и мастера)
- Полный доступ к личному трекеру в кабинете
- Последовательное открытие дней (Day N доступен только после завершения Day N-1)
- Отметка выполнения привычек
- Пропуск дней (лимит: 3 пропуска за 30 дней)
- Отслеживание прогресса (процент выполнения, серия дней, статистика)

## Структура данных

### Модели базы данных

1. **TrackerHabit** - Привычки
   - Категории: face, body, lifestyle, focus
   - Многоязычность (en, ru, ky)

2. **TrackerProgramTemplate** - Шаблоны программ
   - Версионирование
   - Активность

3. **TrackerProgramDay** - Дни программы (шаблонные)
   - Номер дня (1-30)
   - Фокус дня (многоязычный)
   - Связь с привычками

4. **TrackerUserProgram** - Экземпляр программы пользователя
   - Статус: active, finished, cancelled
   - Лимит пропусков

5. **TrackerUserDay** - Дни пользователя
   - Статусы: locked, open, completed, skipped

6. **TrackerUserDayLog** - Логи выполнения привычек

## API Endpoints

### Публичные
- `GET /api/tracker/public` - Публичная информация о трекере
- `GET /api/tracker/public/demo-day` - Демо-пример дня

### Для пользователей
- `POST /api/tracker/programs/start` - Начать программу
- `GET /api/tracker/programs/current` - Текущая программа
- `GET /api/tracker/days/current` - Текущий день
- `GET /api/tracker/days/{day_number}` - Получить день
- `POST /api/tracker/days/{day_number}/complete` - Завершить день
- `POST /api/tracker/days/{day_number}/skip` - Пропустить день
- `POST /api/tracker/days/{day_number}/habits/{habit_id}/toggle` - Отметить привычку
- `GET /api/tracker/progress` - Статистика прогресса

### Админские
- `GET /api/admin/tracker/templates` - Список шаблонов
- `POST /api/admin/tracker/templates` - Создать шаблон
- `GET /api/admin/tracker/habits` - Список привычек
- `POST /api/admin/tracker/habits` - Создать привычку
- `GET /api/admin/tracker/templates/{id}/days` - Дни шаблона
- `POST /api/admin/tracker/templates/{id}/days` - Создать день

## Frontend страницы

- `/beauty-tracker` - Публичная страница (для всех)
- `/client/tracker` - Трекер в кабинете клиента
- `/professional/tracker` - Трекер в кабинете мастера

## Инициализация данных

Для создания базовых данных трекера выполните:

```bash
cd backend
python app/init_tracker.py
```

Скрипт создаст:
- Базовые привычки (face, body, lifestyle)
- Шаблон программы "30 Days Beauty"
- 30 дней программы с базовым набором привычек

## Правила доступа к дням

1. **Day 1** открыт всегда после старта программы
2. **Day N (N>1)** открывается только если Day N-1 имеет статус:
   - `completed` ИЛИ
   - `skipped` (если разрешен пропуск)
3. Будущие дни заблокированы (`locked`)
4. Лимит пропусков: 3 дня за 30 дней (настраивается)

## Особенности реализации

- Последовательный доступ к дням (нельзя перепрыгнуть вперед)
- Автоматическое открытие следующего дня после завершения/пропуска
- Персональные данные трекера (каждый пользователь видит только свой трекер)
- Многоязычность (английский, русский, кыргызский)

## Будущие улучшения

- Уведомления (email/web push)
- Рекомендации мастера клиенту
- Расширенная аналитика
- Календарь прогресса
- Экспорт данных
